# books translator

使用 LLM 翻译 epub 电子书。翻译后的书将保留原文，并将译文与原文并列列出。

## 主要字段

大多数情况，你只需要配置这三个字段就可完整运行。

- `source_file`: 要翻译的 EPUB 原文件
- `translated_file`: 翻译后的 EPUB 文件保存位置，若不填，则保存在 `session_dir` 中。
- `language`: 翻译后的目标语言

## 自定义提示词

`prompt` 可填入提示词，以为 LLM 翻译书籍提供必要信息。例如，你可以将术语表和人物名称规范填入其中。用自然语言描述告知 LLM 即可。

## 额外字段

下列字段若不想了解，保留原始值即可。

- `max_chunk_tokens`: 翻译分段时，限制每段的最大 tokens 数。由于 LLM 的特性，不可能将整本书一次性输入大语言模型来翻译。因此，会将书籍分段提交给 LLM。这个参数用于限制每一段的最大长度（单位是 token）。
- `threads`: 并发发起翻译请求。如果你觉得翻译过慢，可以将这个值调高。但建议不要超过 16 路并发，会出发 LLM 供应商的限流策略。
- `retry_times`: 同一分段连续失败多少次之后，才宣布失败。
- `retry_interval_seconds`: 重试失败后，间隔多少秒后再次重试。

## 输出字段

`translated_file` 翻译后的文件保存路径。

## 中断续译

翻译同一本书时，如果主动中断或因为网络原因中断后，已翻译的进度不会丢失。继续点运行后，可以从上一次翻译的进度继续翻译。